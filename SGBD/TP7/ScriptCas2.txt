SET LINESIZE 150
CLEAR SCREEN
SET FEEDBACK OFF

REM ------------------------------------
REM Cas 2 TRIGGERS : Triggers et MAJ
REM ------------------------------------



PROMPT CREATION DES FONCTIONS

CREATE OR REPLACE FUNCTION F_REF_COMMANDE RETURN VARCHAR
IS
BEGIN
RETURN TO_CHAR(SYSDATE,'YYYY')|| TO_CHAR(SeqCommande.nextval);
END;
/

PROMPT CREATION TRIGGERS 
REM ---------- TRIGGERS -------------


CREATE OR REPLACE TRIGGER  TMAJCOMMANDE
BEFORE INSERT OR UPDATE ON COMMANDE
FOR EACH ROW

BEGIN

	:new.DateMAJ := SYSDATE;
	:new.UserMAJ := USER;
END;
/

-- Liste des triggers de votre compte ------

PROMPT LISTE DES TRIGGERS

SELECT TRIGGER_NAME
FROM USER_TRIGGERS
/
PROMPT
PROMPT AFFICHAGE DES TABLES
PROMPT
PROMPT TABLE CLIENT
SELECT * FROM CLIENT
/
PROMPT
PROMPT -- TABLE PRODUIT
SELECT * FROM PRODUIT
/
PROMPT
PROMPT -- TABLE COMMANDE
SELECT * FROM COMMANDE
/
PROMPT
PROMPT -- LIGNE COMMANDE
SELECT * FROM LIGNECOMMANDE;
PROMPT
SET FEEDBACK ON