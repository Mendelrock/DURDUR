REM Script Exercice 1

SET LINESIZE 150
CLEAR SCREEN

drop table Pilote cascade constraint purge;
drop table depart cascade constraint purge;
drop table affectation cascade constraint purge;
drop table qualification cascade constraint purge;

create table Pilote(
        Idpilote integer not null,
        Nompilote varchar(30) not null,
        primary key (idpilote)
    );

create table Depart ( CodeDep varchar(10), Datedep date, primary key (CodeDep));

create table Affectation ( CodeDep varchar(10), IdPilote integer, primary key (CodeDep,IdPilote));

create table Qualification( CodeDep varchar(10), IdPilote integer, primary key (CodeDep,IdPilote));


alter table Affectation
        add constraint FK_Affec_pilote foreign key (IdPilote) references Pilote(idpilote)
	add constraint FK_Affec_depart foreign key (CodeDep) references Depart(codedep);

alter table Qualification
        add constraint FK_quali_pilote foreign key (IdPilote) references Pilote(idpilote)
	add constraint FK_qualif_depart foreign key (CodeDep) references Depart(codedep);



insert into pilote (IdPilote,Nompilote) values (1,'Achet') ;
insert into pilote (IdPilote,Nompilote) values (2,'Pastor') ;
insert into pilote (IdPilote,Nompilote) values (3,'Urtu') ;

insert into depart (codedep, datedep) values (10, '12/12/2014');
insert into depart (codedep, datedep) values (20, '13/12/2014');
insert into depart (codedep, datedep) values (30, '14/12/2014');

insert into qualification (idpilote, codedep) values (1, 10);
insert into affectation (idpilote, codedep) values (1, 10);

PROMPT *** Table pilote  ***
select * from pilote;

PROMPT *** Table depart***
select * from depart;

PROMPT *** Table qualification***
select * from qualification;

PROMPT *** Table affectation***
select * from affectation;

PROMPT *** Donnée qui viole la contrainte d'inclusion : il ne devrait pas pouvoir etre insérée
insert into affectation (idpilote, codedep) values (2, 10);

PROMPT *** Table affectation***
select * from affectation;



