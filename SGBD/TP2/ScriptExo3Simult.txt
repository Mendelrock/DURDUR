REM Exercice 3

drop table pilote cascade constraint purge;
drop table MissionSanitaire cascade constraint purge;
drop table MissionEntrainement cascade constraint purge;


create table pilote (
        IdPilote integer not null,
        Nom varchar(30) not null,
		CodeSani integer,
		CodeEntr integer,
        primary key (idPilote)
    );

create table MissionSanitaire (
        CodeSani integer not null,
        Libelle varchar(30) not null,
        primary key (CodeSani)
    );

create table MissionEntrainement (
        CodeEntr integer not null,
        Libelle varchar(30) not null,
        primary key (CodeEntr)
    );

alter table pilote 
        add constraint FK_pilote_MissionSani
        foreign key (CodeSani) 
        references MissionSanitaire(CodeSani)
		add constraint FK_pilote_MissionEntr
        foreign key (CodeEntr) 
        references MissionEntrainement(CodeEntr)
;

alter table pilote
		add constraint CK_Simultaneite
		CHECK ((CodeSani IS NOT NULL AND CodeEntr IS NOT NULL) OR (CodeSani IS NULL AND CodeEntr IS NULL))
;



INSERT INTO MissionSanitaire VALUES (1, 'EbolaMali');
INSERT INTO MissionSanitaire VALUES (2, 'EbolaMaroc');

INSERT INTO MissionEntrainement VALUES (1, 'MaintienOrdreLiban');
INSERT INTO MissionEntrainement VALUES (2, 'MaintienOrdreSyrie');

INSERT INTO Pilote VALUES (1, 'Londrin', 1, NULL);
INSERT INTO Pilote VALUES (2, 'Fritz', NULL, 2);
INSERT INTO Pilote VALUES (3, 'Grolande', 2, 1);
INSERT INTO Pilote VALUES (4, 'Speranza', NULL, NULL);